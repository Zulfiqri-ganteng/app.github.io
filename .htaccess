# ----------------------------------------------------------------------

# üîí KEAMANAN DAN PROTEKSI

# ----------------------------------------------------------------------

# Blokir akses ke file rahasia

<FilesMatch "\.(env|git|log|sql)$">
Order allow,deny
Deny from all
</FilesMatch>

# Batasi akses ke folder tertentu

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI} ^/(application|system|vendor)/.*$
    RewriteRule ^ - [F,L]
</IfModule>

# Hapus cache browser untuk file PHP

<FilesMatch "\.php$">
FileETag None
<IfModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1980 05:00:00 GMT"
</IfModule>
</FilesMatch>

# ----------------------------------------------------------------------

# üåü MENGIKUTI FORMAT BARIS UNIFIK (LF)

# ----------------------------------------------------------------------

# Ubah CRLF menjadi LF untuk keseluruhan server

SetEnvIfNoCase Content-Type "^text/.\*" force-response-crlf\n

# ----------------------------------------------------------------------

# üõ† OTOMATIS HAPUS 'index.php' DARI URL

# ----------------------------------------------------------------------

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # Jika folder aplikasi berada di subfolder (misalnya /app.sewaambulaneindonesia24jam.com)
    RewriteBase /app.sewaambulaneindonesia24jam.com/

    # Hindari mengakses direktori terlarang
    RewriteCond $1 ^(application|system|vendor) [NC]
    RewriteRule ^(.*)$ - [R=403,L]

    # Hilangkan index.php dari URL
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

# ----------------------------------------------------------------------

# ‚ö†Ô∏è PERINGATAN: JANGAN AKTIFKAN INI DI LOCALHOST!

# ----------------------------------------------------------------------

# Aktifkan jika kamu ingin memblokir akses langsung ke file .php

# <FilesMatch "\.php$">

# Order deny,allow

# Deny from all

# </FilesMatch>

# ----------------------------------------------------------------------

# üí° CATATAN

# ----------------------------------------------------------------------

# 1. Pastikan mod_rewrite aktif di server.

# 2. Ganti `/app.sewaambulaneindonesia24jam.com/` sesuai domain/subdomainmu.

# 3. Jangan lupa atur izin file:

# chmod 644 .htaccess

# chmod -R 755 application/system/vendor/uploads
